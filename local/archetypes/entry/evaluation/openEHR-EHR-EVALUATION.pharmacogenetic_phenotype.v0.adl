archetype (adl_version=1.4; uid=e4c8ebe7-412f-448b-ae0d-890b42556861)
	openEHR-EHR-EVALUATION.pharmacogenetic_phenotype.v0

concept
	[at0000]	-- Pharmacogenetic phenotype
language
	original_language = <[ISO_639-1::en]>
description
	original_author = <
		["name"] = <"Ian McNicoll">
		["organisation"] = <"freshEHR Clinical Informatics Ltd.">
		["email"] = <"ian@freshehr.com">
		["date"] = <"2023-03-02">
	>
	details = <
		["en"] = <
			language = <[ISO_639-1::en]>
			purpose = <"To record details of pharmacogenetic phenotype findings relating to a single genotype, in particular to record metaboliser status / functional activity against an enzyme known to impact the effectiveness/ toxicity of one or more medications.">
			use = <"There is crossover in purpose with the Precaution archetype https://ckm.openehr.org/ckm/archetypes/1013.1.2593, but this is designed to record many different therapeutic precautions, and to report only adverse effects e.g poor efficacy or toxicity, whereas this archetype is intended to capture both positive and negative effects and normal metaboliser status. 

In that respect this is perhaps closer to a a diagnosis then a risk factor or precaution.

There is an argument that Precaution might be used to flag the presence of significant phenotypes, perhaps as a general statement such as 'Significant known metaboliser issues'  which reference the specific Phenotypic records.">
			keywords = <"pharmacogenetics, pharmacogenomics, decision support, contraindication, precaution", ...>
			misuse = <"Not to be used to record genomic phenotypes which are unrelated to pharmacogenetics.">
			copyright = <"© Apperta Foundation">
		>
	>
	lifecycle_state = <"in_development">
	other_contributors = <>
	other_details = <
		["licence"] = <"This work is licensed under the Creative Commons Attribution-ShareAlike 4.0 License. To view a copy of this license, visit http://creativecommons.org/licenses/by-sa/4.0/.">
		["custodian_organisation"] = <"Apperta UK">
		["references"] = <"HL7.FHIR.UV.GENOMICS-REPORTING\\Genomics Background - FHIR v4.0.1 \"HL7.FHIR.UV.GENOMICS-REPORTING\\Genomics Background - FHIR V4.0.1\". Build.Fhir.Org, 2023, http://build.fhir.org/ig/HL7/genomics-reporting/background.html. Accessed 7 Mar 2023.

Dolin, R., Boxwala, A. and Shalaby, J. Dolin, R.H. et al. \"A Pharmacogenomics Clinical Decision Support Service Based On FHIR And CDS Hooks\". Methods Of Information In Medicine, vol 57, no. S 02, 2018, pp. e115-e123. Georg Thieme Verlag KG, doi:10.1055/s-0038-1676466. Accessed 7 Mar 2023.">
		["original_namespace"] = <"uk.org.clinicalmodels">
		["original_publisher"] = <"Apperta UK">
		["custodian_namespace"] = <"uk.org.clinicalmodels">
		["MD5-CAM-1.0.1"] = <"70DE7D6A08DA0E7CEC7E6860EE6931FF">
		["build_uid"] = <"0f8c80a1-60dc-4559-9861-7a9c01deff0f">
		["ip_acknowledgements"] = <"This artefact includes content from SNOMED Clinical Terms® (SNOMED CT®) which is copyrighted material of the International Health Terminology Standards Development Organisation (IHTSDO). Where an implementation of this artefact makes use of SNOMED CT content, the implementer must have the appropriate SNOMED CT Affiliate license - for more information contact https://www.snomed.org/snomed-ct/get-snomed or info@snomed.org.">
		["revision"] = <"0.0.1-alpha">
	>

definition
	EVALUATION[at0000] matches {    -- Pharmacogenetic phenotype
		data matches {
			ITEM_TREE[at0001] matches {    -- Item tree
				items cardinality matches {0..*; unordered} matches {
					allow_archetype CLUSTER[at0003] occurrences matches {0..1} matches {    -- Genotype details
						include
							archetype_id/value matches {/.*|openEHR-EHR-CLUSTER\.genotype\.v0/}
					}
					ELEMENT[at0004] occurrences matches {0..1} matches {    -- Metaboliser/activity status
						value matches {
							DV_CODED_TEXT matches {
								defining_code matches {
									[local::
									at0005,    -- Normal metaboliser
									at0006,    -- Rapid metaboliser
									at0007,    -- Ultrarapid metaboliser
									at0008,    -- Intermediate metaboliser
									at0009,    -- Poor metaboliser
									at0010,    -- Increased function
									at0011,    -- Decreased function
									at0012,    -- Normal function
									at0013]    -- Poor function
								}
							}
						}
					}
					ELEMENT[at0002] occurrences matches {0..1} matches {    -- Phenotype term
						value matches {
							DV_TEXT matches {*}
						}
					}
					ELEMENT[at0014] occurrences matches {0..1} matches {    -- Activity score
						value matches {
							DV_QUANTITY matches {*}
						}
					}
				}
			}
		}
		protocol matches {
			ITEM_TREE[at0015] matches {    -- Item tree
				items cardinality matches {0..*; unordered} matches {
					ELEMENT[at0016] occurrences matches {0..1} matches {    -- Date assessed
						value matches {
							DV_DATE_TIME matches {*}
						}
					}
					allow_archetype CLUSTER[at0017] occurrences matches {0..*} matches {    -- Extension
						include
							archetype_id/value matches {/.*/}
					}
				}
			}
		}
	}


ontology
	terminologies_available = <"SNOMED-CT", "LOINC">
	term_definitions = <
		["en"] = <
			items = <
				["at0000"] = <
					text = <"Pharmacogenetic phenotype">
					description = <"Details of Pharmacogenetic phenotype findings relating to a single genotype, in particular to record metaboliser status / functional activity against an enzyme known to impact the effectiveness/ toxicity of one or more medications.">
				>
				["at0001"] = <
					text = <"Item tree">
					description = <"@ internal @">
				>
				["at0002"] = <
					text = <"Phenotype term">
					description = <"A single 'pre-coordinated' term which includes the gene/enzyme name and the metaboliser status.">
					comment = <"This may need to be pre-computed to support clinical systems which require pre-coordinated SNOMED-CT terms to support CDSS.">
				>
				["at0003"] = <
					text = <"Genotype details">
					description = <"Slot to include details of the genotype which relates to this phenotype.">
				>
				["at0004"] = <
					text = <"Metaboliser/activity status">
					description = <"The estimated metaboliser status or functional activity level derived from knowledge of the impact of the detected genotype.">
					comment = <"For example: local information requirements or additional metadata to align with FHIR or equivalents.">
				>
				["at0005"] = <
					text = <"Normal metaboliser">
					description = <"The metaboliser status is normal.">
				>
				["at0006"] = <
					text = <"Rapid metaboliser">
					description = <"The metaboliser status is rapid.">
				>
				["at0007"] = <
					text = <"Ultrarapid metaboliser">
					description = <"The metaboliser status is ultrarapid.">
				>
				["at0008"] = <
					text = <"Intermediate metaboliser">
					description = <"The metaboliser status is intermediate.">
				>
				["at0009"] = <
					text = <"Poor metaboliser">
					description = <"The metaboliser status is poor.">
				>
				["at0010"] = <
					text = <"Increased function">
					description = <"Functional activity is increased.">
				>
				["at0011"] = <
					text = <"Decreased function">
					description = <"Functional activity is decreased.">
				>
				["at0012"] = <
					text = <"Normal function">
					description = <"Functional activity is normal.">
				>
				["at0013"] = <
					text = <"Poor function">
					description = <"Functional activity is poor.">
				>
				["at0014"] = <
					text = <"Activity score">
					description = <"An associated derived activity score, based on known association with specific genotypes, which is required to assess metaboliser status for some phenotypes.">
				>
				["at0015"] = <
					text = <"Item tree">
					description = <"@ internal @">
				>
				["at0016"] = <
					text = <"Date assessed">
					description = <"The date at which the phenotype was assessed.">
				>
				["at0017"] = <
					text = <"Extension">
					description = <"Additional information required to capture local content or to align with other reference models/formalisms.">
				>
			>
		>
	>
	term_bindings = <
		["SNOMED-CT"] = <
			items = <
				["at0005"] = <[SNOMED-CT::3351000181105]>
				["at0006"] = <[SNOMED-CT::3341000181107]>
				["at0007"] = <[SNOMED-CT::3331000181100]>
				["at0008"] = <[SNOMED-CT::3361000181108]>
				["at0009"] = <[SNOMED-CT::3371000181103]>
				["at0010"] = <[SNOMED-CT::3381000181101]>
				["at0012"] = <[SNOMED-CT::3391000181104]>
				["at0011"] = <[SNOMED-CT::3401000181101]>
				["at0013"] = <[SNOMED-CT::3451000181100]>
			>
		>
		["LOINC"] = <
			items = <
				["at0005"] = <[LOINC::LA25391-6]>
				["at0006"] = <[LOINC::LA25390-8]>
				["at0007"] = <[LOINC::LA10315-2]>
				["at0008"] = <[LOINC::LA10317-8]>
				["at0009"] = <[LOINC::LA9657-3]>
				["at0010"] = <[LOINC::LA25392-4]>
				["at0012"] = <[LOINC::LA25393-2]>
				["at0011"] = <[LOINC::LA25395-7]>
				["at0013"] = <[LOINC::LA25394-0]>
			>
		>
	>
